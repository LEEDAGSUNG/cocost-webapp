<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cocost WebApp</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="/manifest.json" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="Cocost" />
  <meta name="color-scheme" content="light dark" />
  <style>
    .fridge-table {
      width: 100%;
      border-collapse: collapse;
    }
    .fridge-table th, .fridge-table td {
      padding: 8px;
      border: 1px solid #ccc;
      text-align: left;
    }
    @media (max-width: 768px) {
      .fridge-table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
      }
      #main-interface {
        flex-direction: column;
      }
      #sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #ddd;
        flex-direction: row;
        overflow-x: auto;
      }
      .sidebar-item {
        flex: 1;
        white-space: nowrap;
      }
    }
    #main-interface {
      display: flex;
      height: calc(100vh - 60px);
    }
    #content {
      flex: 1;
      overflow-y: auto;
      padding: 24px;
      background-color: #fafafa;
    }
    #sidebar {
      display: flex;
      flex-direction: column;
      width: 240px;
      background-color: #f4f4f4;
      border-right: 1px solid #ddd;
      padding: 20px;
      gap: 10px;
    }
    .sidebar-item {
      padding: 12px;
      border-radius: 6px;
      transition: background-color 0.2s ease;
    }
    .sidebar-item:hover,
    .sidebar-item.active {
      background-color: #ddd;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="auth-container" class="auth-mode">
    <div class="auth-box">
      <img src="favicon.png" alt="Logo" class="logo" />
      <h2>ë¡œê·¸ì¸</h2>
      <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" />
      <button id="login-btn">í™•ì¸</button>
      <br />
      <button id="install-btn" style="display:none; margin-top:12px;">ğŸ“² Cocost ì•± ì„¤ì¹˜í•˜ê¸°</button>
  
    </div> <!-- ğŸ”§ auth-box ë‹«ëŠ” div ë³µêµ¬ -->
  </div>

  </div>

<div class="main-wrapper" style="display:none;">
  <header id="top-nav">Cocost</header>
  <div id="main-interface">
    <div id="sidebar">
      <ul class="category-list">
        <li class="sidebar-item" data-page="dashboard">ëŒ€ì‹œë³´ë“œ</li>
        <li class="sidebar-item" data-page="fridge">ëƒ‰ì¥ê³ </li>
        <li class="sidebar-item" data-page="recipes">ë ˆì‹œí”¼</li>
        <li class="sidebar-item" data-page="cost">ì½”ìŠ¤íŠ¸</li>
        <li class="sidebar-item" data-page="coffee">ì»¤í”¼ë¨¸ì‹ </li>
        <li class="sidebar-item" data-page="history">íˆìŠ¤í† ë¦¬</li>
        <li class="sidebar-item" data-page="settings">ì„¤ì •</li>
      </ul>
    </div>
    <div id="content">ë©”ì¸ ì½˜í…ì¸  ì˜ì—­</div>
  </div>
</div>

  <!-- í˜ì´ì§€ í…œí”Œë¦¿ ë³µì› -->

<template id="cost">
  <h2>ì‹ìì¬ë³„ ì½”ìŠ¤íŠ¸ ê³„ì‚°</h2>
  <form id="cost-form">
    <input type="text" id="cost-name" placeholder="ì¬ë£Œëª…" required />
    <input type="number" id="cost-price" placeholder="êµ¬ì…ê°€ê²© (ì›)" required />
    <input type="number" step="0.1" id="cost-qty" placeholder="ìˆ˜ëŸ‰" required />
    <select id="cost-unit">
      <option value="ê°œ">ê°œ</option>
      <option value="g">g</option>
      <option value="ml">ml</option>
    </select>
    <button type="submit">ë“±ë¡</button>
  </form>
  <table class="fridge-table">
    <thead>
      <tr>
        <th>ì¬ë£Œëª…</th>
        <th>êµ¬ì…ê°€</th>
        <th>ìˆ˜ëŸ‰</th>
        <th>ë‹¨ìœ„</th>
        <th>1ê°œë‹¹ ê°€ê²©</th>
        <th>ì‚­ì œ</th>
      </tr>
    </thead>
    <tbody id="cost-list"></tbody>
  </table>
</template>

<template id="coffee">
  <h2>ì»¤í”¼ë¨¸ì‹ </h2>
  <form id="coffee-form">
    <input type="text" id="machine-name" placeholder="ë¨¸ì‹  ì´ë¦„" required />
    <input type="text" id="steam-position" placeholder="ìŠ¤íŒ€ ìœ„ì¹˜ (ì˜ˆ: left)" required />
    <input type="text" id="espresso-position" placeholder="ì—ìŠ¤í”„ë ˆì†Œ ìœ„ì¹˜ (ì˜ˆ: right)" required />
    <input type="text" id="bean-name" placeholder="ì›ë‘ëª…" required />
    <input type="number" id="bean-weight" placeholder="ì´ëŸ‰ (g)" required />
    <input type="number" id="bean-price" placeholder="ì´ê¸ˆì•¡ (ì›)" required />
    <input type="date" id="bean-roastdate" required />
    <button type="submit">ë“±ë¡</button>
  </form>
  <table class="fridge-table">
    <thead>
      <tr>
        <th>ì›ë‘ëª…</th>
        <th>ì´ëŸ‰(g)</th>
        <th>ì´ê¸ˆì•¡(ì›)</th>
        <th>1gë‹¹ ê°€ê²©</th>
        <th>ë¡œìŠ¤íŒ…ì¼</th>
        <th>ì‚­ì œ</th>
      </tr>
    </thead>
    <tbody id="coffee-list"></tbody>
  </table>
</template>

<template id="dashboard">
  <h2>ëŒ€ì‹œë³´ë“œ</h2>
  <div class="dashboard-grid">
    <div class="dashboard-card">
      <h3>ì˜¤ëŠ˜ì˜ ìƒíƒœ</h3>
      <p>ë¬´ì—‡ì´ë“  ì‹œì‘í•´ë³¼ ìˆ˜ ìˆì–´!</p>
    </div>
    <div class="dashboard-card">
      <h3>ì´ ë³´ê´€ ì‹ìì¬</h3>
      <p id="stat-fridge">0ê°œ</p>
    </div>
    <div class="dashboard-card">
      <h3>ì½”ìŠ¤íŠ¸ ë“±ë¡ í•­ëª©</h3>
      <p id="stat-cost">0ê°œ</p>
    </div>
    <div class="dashboard-card">
      <h3>ë³´ê´€ ìœ„ì¹˜ ë¶„í¬</h3>
      <canvas id="fridge-chart" width="200" height="200"></canvas>
    </div>
    <div class="dashboard-card wide">
      <h3>ìµœê·¼ í™œë™</h3>
      <ul>
        <li>ëƒ‰ì¥ê³  ì‹ìì¬ ì¶”ê°€</li>
        <li>ë ˆì‹œí”¼ í•˜ë‚˜ ì €ì¥ë¨</li>
        <li>ì»¤í”¼ ê¸°ë¡ 1ê±´ ì…ë ¥ë¨</li>
      </ul>
    </div>
  </div>
</template>

<template id="fridge">
  <h2>ë‚´ ëƒ‰ì¥ê³ </h2>
  <form id="fridge-form">
    <input type="text" id="item-name" placeholder="ì¬ë£Œëª…" required />
    <input type="number" step="0.1" id="item-qty" placeholder="ìˆ˜ëŸ‰" required />
    <select id="item-unit">
      <option value="ê°œ">ê°œ</option>
      <option value="g">g</option>
      <option value="ml">ml</option>
    </select>
    <select id="item-location">
      <option value="ëƒ‰ì¥">ëƒ‰ì¥</option>
      <option value="ëƒ‰ë™">ëƒ‰ë™</option>
      <option value="ì‹¤ì˜¨">ì‹¤ì˜¨</option>
    </select>
    <input type="date" id="item-exp" placeholder="ìœ í†µê¸°í•œ" />
    <button type="submit">ì¶”ê°€</button>
  </form>
  <table class="fridge-table">
    <thead>
      <tr>
        <th>ì¬ë£Œëª…</th>
        <th>ìˆ˜ëŸ‰</th>
        <th>ë³´ê´€ ìœ„ì¹˜</th>
        <th>ìœ í†µê¸°í•œ</th>
        <th>ì‚­ì œ</th>
      </tr>
    </thead>
    <tbody id="fridge-list"></tbody>
  </table>
</template>

<template id="history">
  <h2>ì†Œë¹„ íˆìŠ¤í† ë¦¬</h2>
  <ul id="usage-history"></ul>
</template>

<template id="settings">
  <h2>ì„¤ì •</h2>
  <p>ì•± í…Œë§ˆ, ê³„ì • ë“± ì„¤ì •</p>
</template>

  <script src="app.js"></script>

  <!-- âœ… ì„¤ì¹˜ ë²„íŠ¼ ë¡œì§ -->
  <script>
    let deferredPrompt;
    const installBtn = document.getElementById('install-btn');

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBtn.style.display = 'block';
    });

    installBtn.addEventListener('click', async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        if (outcome === 'accepted') {
          console.log('âœ… Cocost ì•± ì„¤ì¹˜ ì™„ë£Œ!');
        } else {
          console.log('âŒ ì„¤ì¹˜ ê±°ì ˆë¨');
        }
        deferredPrompt = null;
        installBtn.style.display = 'none';
      }
    });
  </script>

  <!-- âœ… ì •ì  service-worker ë“±ë¡ -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/service-worker.js')
        .then(() => console.log('âœ… Service Worker ë“±ë¡ë¨'))
        .catch(err => console.error('âŒ ë“±ë¡ ì‹¤íŒ¨', err));
    }
  </script>
</body>
</html>
